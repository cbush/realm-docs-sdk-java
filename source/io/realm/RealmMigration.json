{"path":"/io/realm/RealmMigration","root":{"type":"root","children":[{"type":"heading","children":[{"type":"text","value":"io.realm.RealmMigration"}],"depth":1},{"type":"html","value":"<a name=\"io_realm_RealmMigration\" ></a>","anchorName":"io_realm_RealmMigration","entity":{"canonicalName":"io.realm.RealmMigration","pageUri":"/io/realm/RealmMigration","data":{"category":"class","containingPackage":"io.realm","simpleTypeName":"RealmMigration","classType":"class"},"isExternal":false}},{"type":"root","children":[{"type":"paragraph","children":[{"type":"text","value":"The RealmMigration class is used to perform the migration of one Realm schema to another. The schema for a Realm is defined by all classes in a project that extend "},{"type":"link","children":[{"type":"text","value":"io.realm.RealmObject"}],"targetCanonicalName":"io.realm.RealmObject","isPending":false,"linkText":"io.realm.RealmObject","url":"/io/realm/RealmObject#io_realm_RealmObject","title":"io.realm.RealmObject","isExternal":false},{"type":"text","value":"or implement "},{"type":"link","children":[{"type":"text","value":"io.realm.RealmModel"}],"targetCanonicalName":"io.realm.RealmModel","isPending":false,"linkText":"io.realm.RealmModel","url":"/io/realm/RealmModel#io_realm_RealmModel","title":"io.realm.RealmModel","isExternal":false},{"type":"text","value":", so any changes to these classes will require a migration."}]},{"type":"paragraph","children":[{"type":"text","value":"To support migrations from any previous schemaVersion to the newest, the following pattern is recommended when writing a migration:","position":{"start":{"line":4,"column":5,"offset":2515},"end":{"line":7,"column":2,"offset":2651}}}],"position":{"start":{"line":4,"column":2,"offset":2512},"end":{"line":7,"column":2,"offset":2651}}},{"type":"paragraph","children":[{"type":"text","value":""},{"type":"code","value":"\n public class CustomMigration implements RealmMigration {\n   \\@Override\n   public long migrate(DynamicRealm realm, long oldVersion, long newVersion) {\n     RealmSchema schema = realm.getSchema();\n\n     if (oldVersion == 0) {\n       // Migrate from v0 to v1\n       oldVersion++;\n     }\n\n     if (oldVersion == 1) {\n       // Migrate from v1 to v2\n       oldVersion++;\n     }\n\n     if (oldVersion < newVersion) {\n         throw new IllegalStateException(String.format(Locale.US, \"Migration missing from v%d to v%d\", oldVersion, newVersion));\n     }\n   }\n }\n ","lang":"java"},{"type":"text","value":""}]},{"type":"paragraph","children":[{"type":"paragraph","children":[{"type":"text","value":"During development when RealmObject classes can change frequently, it is possible to use "},{"type":"strong","children":[{"type":"text","value":"io.realm.Realm#deleteRealm(RealmConfiguration)"},{"type":"text","value":" (?)"}],"targetCanonicalName":"io.realm.Realm.deleteRealm(RealmConfiguration)","isPending":true,"linkText":"io.realm.Realm#deleteRealm(RealmConfiguration)"},{"type":"text","value":". This will delete the database file and eliminate the need for any migrations."}]}],"position":{"start":{"line":11,"column":2,"offset":4972},"end":{"line":14,"column":17,"offset":6402}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":14,"column":17,"offset":6402}}},{"type":"heading","children":[{"type":"text","value":"Method Summary"}],"depth":2},{"type":"table","children":[{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"Modifier and Type"}]},{"type":"tableCell","children":[{"type":"text","value":"Method and Description"}]}]},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"public"},{"type":"text","value":" "},{"type":"strong","children":[{"type":"text","value":"void"},{"type":"text","value":" (?)"}],"targetCanonicalName":"void","isPending":true,"linkText":"void"}]},{"type":"tableCell","children":[{"type":"paragraph","children":[{"type":"link","children":[{"type":"text","value":"migrate"}],"targetCanonicalName":"io.realm.RealmMigration.migrate((DynamicRealm, long, long))","isPending":false,"linkText":"migrate","url":"/io/realm/RealmMigration#io_realm_RealmMigration_migrate__DynamicRealm__long__long__","title":"migrate","isExternal":false},{"type":"text","value":" "},{"type":"text","value":"("},{"type":"link","children":[{"type":"text","value":"DynamicRealm"}],"url":"/io/realm/DynamicRealm#io_realm_DynamicRealm","title":"DynamicRealm","linkText":"DynamicRealm","targetCanonicalName":"io.realm.DynamicRealm","isPending":false,"isExternal":false},{"type":"text","value":" realm, "},{"type":"strong","children":[{"type":"text","value":"long"},{"type":"text","value":" (?)"}],"targetCanonicalName":"long","isPending":true,"linkText":"long"},{"type":"text","value":" oldVersion, "},{"type":"strong","children":[{"type":"text","value":"long"},{"type":"text","value":" (?)"}],"targetCanonicalName":"long","isPending":true,"linkText":"long"},{"type":"text","value":" newVersion"},{"type":"text","value":")"}]},{"type":"paragraph","children":[{"type":"root","children":[{"type":"text","value":"This method will be called if a migration is needed.","position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":1,"column":53,"offset":52}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":1,"column":53,"offset":52}}}]}]}]}],"align":[null,null]},{"type":"heading","children":[{"type":"text","value":"Method Detail"}],"depth":2},{"type":"heading","children":[{"type":"text","value":"migrate"}],"depth":3},{"type":"html","value":"<a name=\"io_realm_RealmMigration_migrate__DynamicRealm__long__long__\" ></a>","anchorName":"io_realm_RealmMigration_migrate__DynamicRealm__long__long__","entity":{"canonicalName":"io.realm.RealmMigration.migrate((DynamicRealm, long, long))","pageUri":"/io/realm/RealmMigration","isExternal":false}},{"type":"heading","children":[{"type":"text","value":"public"},{"type":"text","value":" "},{"type":"strong","children":[{"type":"text","value":"void"},{"type":"text","value":" (?)"}],"targetCanonicalName":"void","isPending":true,"linkText":"void"},{"type":"text","value":" migrate "},{"type":"text","value":"("},{"type":"link","children":[{"type":"text","value":"DynamicRealm"}],"url":"/io/realm/DynamicRealm#io_realm_DynamicRealm","title":"DynamicRealm","linkText":"DynamicRealm","targetCanonicalName":"io.realm.DynamicRealm","isPending":false,"isExternal":false},{"type":"text","value":" realm, "},{"type":"strong","children":[{"type":"text","value":"long"},{"type":"text","value":" (?)"}],"targetCanonicalName":"long","isPending":true,"linkText":"long"},{"type":"text","value":" oldVersion, "},{"type":"strong","children":[{"type":"text","value":"long"},{"type":"text","value":" (?)"}],"targetCanonicalName":"long","isPending":true,"linkText":"long"},{"type":"text","value":" newVersion"},{"type":"text","value":")"}],"depth":4},{"type":"root","children":[{"type":"text","value":"This method will be called if a migration is needed. The entire method is wrapped in a write transaction so it is possible to create, update or delete any existing objects without wrapping it in your own transaction.","position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":3,"column":46,"offset":218}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":3,"column":46,"offset":218}}},{"type":"heading","children":[{"type":"text","value":"Parameters"}],"depth":5},{"type":"list","children":[{"type":"listItem","children":[{"type":"inlineCode","value":"realm - "},{"type":"root","children":[{"type":"text","value":"the Realm schema on which to perform the migration.","position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":1,"column":52,"offset":51}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":1,"column":52,"offset":51}}}]},{"type":"listItem","children":[{"type":"inlineCode","value":"oldVersion - "},{"type":"root","children":[{"type":"text","value":"the schema version of the Realm at the start of the migration.","position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":1,"column":63,"offset":62}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":1,"column":63,"offset":62}}}]},{"type":"listItem","children":[{"type":"inlineCode","value":"newVersion - "},{"type":"root","children":[{"type":"text","value":"the schema version of the Realm after executing the migration.","position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":1,"column":63,"offset":62}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":1,"column":63,"offset":62}}}]}],"ordered":false}]}}